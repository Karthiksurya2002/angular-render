<div class="p-4 container">
  <div class="dialog-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0"></h5>
    <button mat-icon-button (click)="closeDialog()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <div *ngIf="findDoctor">
    <div class="hospitalDoctors" [formGroup]="editSpecialties">
      <div class="row">
        <div class="col-md-6">
          <h3>Update Title</h3>
          <mat-form-field appearance="outline" class="w-100 mb-3">
            <input matInput placeholder="Update.." formControlName="BaTitle" />
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <h3>Update Select your Specialty Label</h3>
          <mat-form-field appearance="outline" class="w-100 mb-3">
            <input
              matInput
              placeholder="Update..."
              formControlName="BaSpecialties"
            />
          </mat-form-field>
        </div>
        <div class="col-md-12">
          <h3>Add or Update Specialty Category</h3>

          <textarea
            rows="12"
            cols="155"
            placeholder="Add or Update Specialty Category..."
            formControlName="BaSpecialtiesCategory"
          ></textarea>
        </div>
        <div class="col-md-6">
          <h3>Update OR Label</h3>
          <mat-form-field appearance="outline" class="w-100 mb-3">
            <input
              matInput
              placeholder="Update..."
              formControlName="BaOrLabel"
            />
          </mat-form-field>
        </div>
        <div class="col-md-6">
          <h3>Update Search Label</h3>
          <mat-form-field appearance="outline" class="w-100 mb-3">
            <input
              matInput
              placeholder="Update..."
              formControlName="BaSearchLabel"
            />
          </mat-form-field>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="doctorList" [formGroup]="editDoctor">
    <h3 class>Add Doctor Image</h3>
    <div class="row">
      <div class="col-md-5">
        <div class="file-upload-wrapper">
          <div class="file-upload">
            <input
              type="file"
              #fileInput
              hidden
              (change)="onFileSelect($event)"
            />

            <button class="upload-btn" (click)="fileInput.click()">
              Select File
            </button>
            <div class="d-flex justify-content-center">
              <p class="file-name" *ngIf="fileName">
                {{ fileName }}
                <mat-icon
                  class="icon ml-2"
                  (click)="clearAttachement()"
                  [hidden]="fileName == ''"
                  matTooltip="clear"
                >
                  <span class="material-symbols-outlined hover">
                    close_small
                  </span>
                </mat-icon>
              </p>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-5 d-flex justify-content-center">
        <div class="uploadedImage">
          <img [src]="updateDoctorImage" alt="updateDoctorImage" />
        </div>
      </div>
    </div>

    <div class="row">
      <div class="">
        <h3>Update Doctor Name</h3>
        <mat-form-field appearance="outline" class="w-100 mb-3">
          <input
            matInput
            placeholder="Update Doctor Name..."
            formControlName="updateDoctorName"
          />
        </mat-form-field>
      </div>
      <div class="">
        <h3>Update Designation</h3>
        <mat-form-field appearance="outline" class="w-100 mb-3">
          <input
            matInput
            placeholder="Update Designation..."
            formControlName="updateDesignation"
          />
        </mat-form-field>
      </div>
      <div class="row">
        <div class="col-md-6">
          <h3>Selected Specialty</h3>
          <mat-form-field appearance="outline" class="w-100 mb-3">
            <input
              matInput
              placeholder="Update Specialty..."
              [(ngModel)]="selectedDoctor"
              readonly
              formControlName="updateSpecialties"
            />
          </mat-form-field>
        </div>

        <div class="col-md-6 mb-4">
          <h3>Update Specialty</h3>
          <select
            class="newfont custom-select"
            id="specialty-select"
            (change)="onSelect($event)"
          >
            <option
              *ngFor="let data of specialtiesCategoryDropDown"
              [ngValue]="data"
              [value]="data"
            >
              {{ data }}
            </option>
          </select>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="addDoctor" [formGroup]="addDoctorForm">
    <h3 class="mb-4">Add Doctor</h3>

    <h5 class="mb-3">Login Details</h5>
    <div class="row mb-3">
      <div class="col-md-4">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Email (Username)</mat-label>
          <input matInput formControlName="username" />
          <mat-error
            *ngIf="addDoctorForm.get('username')?.hasError('required')"
          >
            Email is required
          </mat-error>
          <mat-error *ngIf="addDoctorForm.get('username')?.hasError('email')">
            Enter a valid email
          </mat-error>
        </mat-form-field>
      </div>

      <div class="col-md-4">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Password</mat-label>
          <input
            matInput
            [type]="showPassword ? 'text' : 'password'"
            formControlName="password"
          />
          <button
            mat-icon-button
            matSuffix
            type="button"
            (click)="togglePassword()"
          >
            <mat-icon>{{
              showPassword ? "visibility_off" : "visibility"
            }}</mat-icon>
          </button>

          <mat-error
            *ngIf="addDoctorForm.get('password')?.hasError('required')"
          >
            Password is required
          </mat-error>
          <mat-error
            *ngIf="addDoctorForm.get('password')?.hasError('minlength')"
          >
            Minimum 8 characters required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="col-md-4">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Confirm Password</mat-label>
          <input
            matInput
            [type]="confirmShowPassword ? 'text' : 'password'"
            formControlName="confirmPassword"
          />
          <button
            mat-icon-button
            matSuffix
            type="button"
            (click)="confirmPassword()"
          >
            <mat-icon>{{
              confirmShowPassword ? "visibility_off" : "visibility"
            }}</mat-icon>
          </button>

          <mat-error
            *ngIf="addDoctorForm.get('confirmPassword')?.hasError('required')"
          >
            Confirm password is required
          </mat-error>
          <mat-error *ngIf="addDoctorForm.hasError('passwordMismatch')">
            Passwords do not match
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <h5 class="mb-3">Specialty & Select Shift</h5>
    <div class="row mb-3">
      <div class="col-md-4">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Specialty</mat-label>
          <mat-select formControlName="specialties">
            <mat-option
              *ngFor="let data of specialtiesCategoryDropDown"
              [value]="data"
            >
              {{ data }}
            </mat-option>
          </mat-select>

          <mat-error
            *ngIf="addDoctorForm.get('specialties')?.hasError('required')"
          >
            Specialty is required
          </mat-error>
        </mat-form-field>
      </div>
      <div class="col-md-4">
        <select
          class="newfont custom-select w-70"
          id="specialty-select"
          (change)="onSelectShiftDetails($event)"
          formControlName="shift"
        >
          <option *ngFor="let data of shiftDetails" [value]="data">
            {{ data }}
          </option>
        </select>
      </div>
    </div>

    <h5 class="mb-3">Professional Details</h5>
    <div class="row mb-3">
      <div class="col-md-4">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Doctor Name</mat-label>
          <input matInput formControlName="doctorName" />
          <mat-error
            *ngIf="addDoctorForm.get('doctorName')?.hasError('required')"
          >
            Doctor name is required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="col-md-4">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Designation</mat-label>
          <input matInput formControlName="designation" />
          <mat-error
            *ngIf="addDoctorForm.get('designation')?.hasError('required')"
          >
            Designation is required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="col-md-4">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Department</mat-label>
          <input matInput formControlName="department" />
          <mat-error
            *ngIf="addDoctorForm.get('department')?.hasError('required')"
          >
            Department is required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="col-md-4">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Qualification</mat-label>
          <input matInput formControlName="qualification" />
          <mat-error
            *ngIf="addDoctorForm.get('qualification')?.hasError('required')"
          >
            Qualification is required
          </mat-error>
        </mat-form-field>
      </div>

      <div class="col-md-4">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Experience (Years)</mat-label>
          <input matInput type="number" formControlName="experience" />
          <mat-error
            *ngIf="addDoctorForm.get('experience')?.hasError('required')"
          >
            Experience is required
          </mat-error>
        </mat-form-field>
      </div>
    </div>

    <div class="row mb-3">
      <div class="col-md-4">
        <h5 class="mb-3">Contact</h5>
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Mobile</mat-label>
          <input matInput formControlName="mobile" />
          <mat-error *ngIf="addDoctorForm.get('mobile')?.hasError('required')">
            Mobile number is required
          </mat-error>
          <mat-error *ngIf="addDoctorForm.get('mobile')?.hasError('pattern')">
            Enter valid 10-digit mobile number
          </mat-error>
        </mat-form-field>
      </div>

      <div class="col-md-6">
        <h5 class="mb-3">Address</h5>
        <textarea
          matInput
          rows="2"
          class="w-100"
          formControlName="address"
          placeholder="Please enter complete address"
        ></textarea>

        <mat-error *ngIf="addDoctorForm.get('address')?.hasError('required')">
          Address is required
        </mat-error>
      </div>
    </div>

    <div class="row">
      <div class="col-md-3">
        <h5 class="mb-3">Status</h5>
        <mat-radio-group formControlName="status">
          <mat-radio-button value="ACTIVE" class="me-3"
            >Active</mat-radio-button
          >
          <mat-radio-button value="INACTIVE">Inactive</mat-radio-button>
        </mat-radio-group>

        <mat-error *ngIf="addDoctorForm.get('status')?.hasError('required')">
          Status is required
        </mat-error>
      </div>
      <div class="col-md-3">
        <h5 class="mb-3">Profile Image</h5>
        <div>
          <div class="file-upload-wrapper">
            <div class="file-upload">
              <input
                type="file"
                #fileInput
                hidden
                (change)="onFileSelect($event)"
              />

              <button class="upload-btn" (click)="fileInput.click()">
                Select File
              </button>
              <div class="d-flex justify-content-center">
                <p class="file-name" *ngIf="fileName">
                  {{ fileName }}
                  <mat-icon
                    class="icon ml-2"
                    (click)="clearAttachement()"
                    [hidden]="fileName == ''"
                    matTooltip="clear"
                  >
                    <span class="material-symbols-outlined hover">
                      close_small
                    </span>
                  </mat-icon>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-3 d-flex justify-content-center" *ngIf="updateDoctor">
        <div class="uploadedImage">
          <img [src]="updateDoctorImage" alt="updateDoctorImage" />
        </div>
      </div>
      <div class="col-md-4 d-flex justify-content-end">
        <div class="mt-4">
          <button
            class="btn btn-primary me-2"
            [disabled]="checkValdation()"
            (click)="addNewDoctor()"
          >
            Save Doctor
          </button>
          <button class="btn btn-secondary" (click)="closeDialog()">
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="text-end" *ngIf="visibleButton">
    <button mat-flat-button color="primary" class="w-10" (click)="Update()">
      Update
    </button>
    <button
      mat-stroked-button
      color="primary"
      class="w-10"
      (click)="closeDialog()"
    >
      Close
    </button>
  </div>
</div>
